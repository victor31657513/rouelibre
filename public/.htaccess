# WASM
AddType application/wasm .wasm


# Isolation requise pour Rapier threads/SIMD (tu peux laisser même sans threads)
Header set Cross-Origin-Opener-Policy "same-origin"
Header set Cross-Origin-Embedder-Policy "require-corp"
Header always set Cross-Origin-Resource-Policy "same-origin"


# Cache long pour assets fingerprintés
<FilesMatch "\.(js|css|wasm|woff2|png|jpe?g|gif|webp|svg)$">
Header set Cache-Control "public, max-age=31536000, immutable"
</FilesMatch>


# index.html non mis en cache
<Files "index.html">
Header set Cache-Control "no-cache"
</Files>


# Fallback SPA (si tu ajoutes un router plus tard)
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.html [L]
